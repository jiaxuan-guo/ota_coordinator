From 0d37f3fb2c721606cd57cdf7cd0c56a73f61bc9a Mon Sep 17 00:00:00 2001
From: "Guo, Jade" <jade.guo@intel.com>
Date: Thu, 24 Oct 2024 18:25:32 +0800
Subject: [PATCH 1/2] Add service ota coordinator into init.rc

Signed-off-by: Guo, Jade <jade.guo@intel.com>
---
 groups/boot-arch/project-celadon/init.rc | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/groups/boot-arch/project-celadon/init.rc b/groups/boot-arch/project-celadon/init.rc
index e13f592..9add57c 100644
--- a/groups/boot-arch/project-celadon/init.rc
+++ b/groups/boot-arch/project-celadon/init.rc
@@ -18,6 +18,14 @@ service watchdogd /system/bin/watchdogd{{#watchdog_parameters}} {{{watchdog_para
     oneshot
     seclabel u:r:watchdogd:s0
 
+service ota_coordinator /system/bin/ota_coordinator
+    user root
+    class core
+    socket ota_socket stream 666 system system
+    oneshot
+    seclabel u:r:shell:s0
+    disabled
+
 on charger
     start watchdogd
 {{#metadata_encryption}}
@@ -58,3 +66,7 @@ on fs
 on verity-logging
     exec u:r:slideshow:s0 -- /sbin/slideshow -t 30000 -p warning/verity_red_1 warning/verity_red_2
 {{/verity_warning}}
+
+on boot
+    start ota_coordinator
+    mkdir /data/vendor/ota 660 system system
-- 
2.34.1

